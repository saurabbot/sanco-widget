(function(){"use strict";try{if(typeof document<"u"){var t=document.createElement("style");t.appendChild(document.createTextNode('@import"https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&display=swap";:host{--primary-color: #064e3b;--primary-hover: #043629;--accent-color: #c5a059;--bg-color: #ffffff;--text-color: #1f2937;--text-muted: #6b7280;--border-radius: 12px;--shadow-lg: 0 10px 25px -5px rgba(0, 0, 0, .1), 0 8px 10px -6px rgba(0, 0, 0, .1);--glass-bg: rgba(255, 255, 255, .8);--glass-border: rgba(255, 255, 255, .2);font-family:Inter,system-ui,-apple-system,sans-serif}.widget-container{position:fixed;bottom:24px;right:24px;z-index:999999;display:flex;flex-direction:column;align-items:flex-end;gap:16px}.launcher-button{width:60px;height:60px;border-radius:50%;background:var(--primary-color);color:#fff;border:none;cursor:pointer;box-shadow:var(--shadow-lg);display:flex;align-items:center;justify-content:center;transition:all .3s cubic-bezier(.4,0,.2,1);position:relative;overflow:hidden}.launcher-button:hover{transform:scale(1.05) translateY(-2px);background:var(--primary-hover)}.launcher-button svg{width:28px;height:28px;transition:transform .3s ease}.launcher-button.open svg{transform:rotate(90deg)}.chat-window{width:400px;height:600px;max-height:calc(100vh - 120px);max-width:calc(100vw - 48px);background:var(--bg-color);border-radius:var(--border-radius);box-shadow:var(--shadow-lg);display:flex;flex-direction:column;overflow:hidden;transform-origin:bottom right;transition:all .3s cubic-bezier(.4,0,.2,1);opacity:0;transform:scale(.95) translateY(20px);pointer-events:none;border:1px solid rgba(0,0,0,.05)}.chat-window.open{opacity:1;transform:scale(1) translateY(0);pointer-events:auto}.chat-header{padding:20px;background:var(--primary-color);color:#fff;display:flex;align-items:center;gap:12px}.chat-header-info h3{margin:0;font-size:16px;font-weight:600;color:#fff}.chat-header-info p{margin:4px 0 0;font-size:13px;opacity:.9;color:#fff}.status-dot{width:8px;height:8px;background:#10b981;border-radius:50%;box-shadow:0 0 0 2px #10b98133}.chat-content{flex:1;overflow-y:auto;padding:20px;display:flex;flex-direction:column;gap:12px;background:#f9fafb}.message{max-width:80%;padding:12px 16px;border-radius:14px;font-size:14px;line-height:1.5;animation:fadeIn .3s ease}@keyframes fadeIn{0%{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}.message.bot{align-self:flex-start;background:#fff;color:var(--text-color);border-bottom-left-radius:4px;box-shadow:0 1px 2px #0000000d}.message.user{align-self:flex-end;background:var(--primary-color);color:#fff;border-bottom-right-radius:4px}.chat-footer{padding:16px;background:#fff;border-top:1px solid #f3f4f6;display:flex;gap:8px;align-items:center}.chat-input{flex:1;border:1px solid #e5e7eb;border-radius:24px;padding:10px 16px;font-size:14px;outline:none;transition:border-color .2s}.chat-input:focus{border-color:var(--primary-color)}.send-button{background:var(--primary-color);color:#fff;border:none;width:36px;height:36px;border-radius:50%;display:flex;align-items:center;justify-content:center;cursor:pointer;transition:background .2s}.send-button:hover{background:var(--primary-hover)}.send-button svg{width:18px;height:18px}.chat-content::-webkit-scrollbar{width:6px}.chat-content::-webkit-scrollbar-track{background:transparent}.chat-content::-webkit-scrollbar-thumb{background:#d1d5db;border-radius:3px}.chat-content::-webkit-scrollbar-thumb:hover{background:#9ca3af}.chat-actions{padding:0 16px 8px;background:#fff;display:flex;justify-content:center}.talk-to-us-button{width:100%;padding:10px;background:transparent;color:var(--primary-color);border:1.5px solid var(--primary-color);border-radius:var(--border-radius);font-size:14px;font-weight:600;cursor:pointer;transition:all .2s;display:flex;align-items:center;justify-content:center;gap:8px}.talk-to-us-button .button-icon{width:18px;height:18px}.talk-to-us-button:hover{background:var(--primary-color);color:#fff}.chat-watermark{padding:8px;text-align:center;font-size:10px;color:var(--text-muted);background:#fff;border-top:1px solid #f9fafb;letter-spacing:.5px;text-transform:uppercase}.chat-watermark a{font-weight:600;color:var(--primary-color);text-decoration:none}.chat-watermark a:hover{text-decoration:underline}.typing-indicator{display:flex;gap:4px;padding:12px 16px;background:#fff;border-radius:14px 14px 14px 4px;box-shadow:0 1px 2px #0000000d;width:fit-content;align-self:flex-start;animation:fadeIn .3s ease;margin-bottom:8px}.typing-dot{width:6px;height:6px;background:var(--text-muted);border-radius:50%;opacity:.6;animation:typingAnimation 1.4s infinite}.typing-dot:nth-child(2){animation-delay:.2s}.typing-dot:nth-child(3){animation-delay:.4s}@keyframes typingAnimation{0%,60%,to{transform:translateY(0)}30%{transform:translateY(-4px)}}')),document.head.appendChild(t)}}catch(r){console.error("vite-plugin-css-injected-by-js",r)}})();
(function(){"use strict";class h{constructor(){this.isOpen=!1,this.domain="http://localhost:8000",this.messages=[{type:"bot",text:"Hello! How can I help you today?"}],this.isTyping=!1,this.init()}init(){const t=document.createElement("div");t.id="sanco-chatbot-root",document.body.appendChild(t),this.shadow=t.attachShadow({mode:"open"}),this.render(),this.setupEventListeners(),this.handleStyleInjection()}handleStyleInjection(){new MutationObserver(e=>{e.forEach(s=>{s.addedNodes.forEach(o=>{if(o.tagName==="STYLE"){const a=o.cloneNode(!0);this.shadow.appendChild(a)}})})}).observe(document.head,{childList:!0}),document.querySelectorAll("style").forEach(e=>{const s=e.cloneNode(!0);this.shadow.appendChild(s)})}render(){this.shadow.innerHTML=`
      <div class="widget-container">
        <div class="chat-window ${this.isOpen?"open":""}">
          <div class="chat-header">
            <div class="status-dot"></div>
            <div class="chat-header-info">
              <h3>Sanco Assistant</h3>
              <p>Online | Ask us anything</p>
            </div>
          </div>
          <div class="chat-content" id="chat-content">
            ${this.messages.map(t=>`
              <div class="message ${t.type}">${t.text}</div>
            `).join("")}
          </div>
          <div class="chat-footer">
            <input type="text" class="chat-input" placeholder="Type a message..." id="message-input">
            <button class="send-button" id="send-button">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="22" y1="2" x2="11" y2="13"></line><polygon points="22 2 15 22 11 13 2 9 22 2"></polygon></svg>
            </button>
          </div>
          <div class="chat-actions">
            <button class="talk-to-us-button" id="talk-to-us">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="button-icon">
                <polygon points="23 7 16 12 23 17 23 7"></polygon>
                <rect x="1" y="5" width="15" height="14" rx="2" ry="2"></rect>
              </svg>
              Talk to us
            </button>
          </div>
          <div class="chat-watermark">
            Powered by <a href="https://propulsion.world/" target="_blank" rel="noopener noreferrer">Propulsion</a>
          </div>
        </div>
        <button class="launcher-button ${this.isOpen?"open":""}" id="launcher">
          <svg id="launcher-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"></path>
          </svg>
        </button>
      </div>
    `}setupEventListeners(){const t=this.shadow.getElementById("launcher"),e=this.shadow.getElementById("send-button"),s=this.shadow.getElementById("message-input"),o=this.shadow.querySelector(".chat-window"),a=this.shadow.getElementById("talk-to-us"),l=this.shadow.querySelector(".chat-watermark a"),u=async()=>{const n=localStorage.getItem("sanco_chat_session"),i=`${this.domain}/api/v1/chat/messages`;return await(await fetch(i,{method:"GET",mode:"cors",headers:{"Content-Type":"application/json","X-Session-UUID":n||""}})).json()};t.addEventListener("click",async()=>{this.isOpen=!this.isOpen,o.classList.toggle("open",this.isOpen),t.classList.toggle("open",this.isOpen),this.trackEvent("widget_toggle",{action:this.isOpen?"open":"close"});const n=await u();console.log(n),this.isOpen?(t.innerHTML='<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>',setTimeout(()=>s.focus(),300)):t.innerHTML='<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"></path></svg>'});const p=async()=>{const n=s.value.trim();if(!n||this.isTyping)return;this.addMessage("user",n),s.value="",this.showTypingIndicator(),this.trackEvent("message_sent",{text_length:n.length});const i=localStorage.getItem("sanco_chat_session"),r=`${this.domain}/api/v1/chat/message`;try{const c=await fetch(r,{method:"POST",mode:"cors",headers:{"Content-Type":"application/json","X-Session-UUID":i||""},body:JSON.stringify({message:n})});if(!c.ok)throw new Error("Network response was not ok");const d=await c.json();d.session_uuid&&localStorage.setItem("sanco_chat_session",d.session_uuid),this.hideTypingIndicator(),this.addMessage("bot",d.reply||d.response||d.message||"I received your message!")}catch(c){console.error("Error:",c),this.hideTypingIndicator(),this.addMessage("bot","Sorry, I'm having trouble connecting to the assistant. Please try again later.")}};e.addEventListener("click",p),s.addEventListener("keypress",n=>{n.key==="Enter"&&p()}),a.addEventListener("click",()=>{this.trackEvent("talk_to_us_click")}),l.addEventListener("click",()=>{this.trackEvent("watermark_click")}),document.addEventListener("click",n=>{var r;const i=n.target.closest('a, button, [role="button"]');i&&!this.shadow.contains(i)&&this.trackEvent("website_click",{element:i.tagName.toLowerCase(),text:(r=i.innerText)==null?void 0:r.trim().slice(0,50),href:i.href||null,id:i.id||null,path:window.location.pathname})},!0)}async trackEvent(t,e={}){const s=localStorage.getItem("sanco_chat_session"),o=`${this.domain}/api/v1/analytics/events`;try{const a=await fetch(o,{method:"POST",mode:"cors",headers:{"Content-Type":"application/json","X-Session-UUID":s||""},body:JSON.stringify({event_type:t,meta_data:e,session_uuid:s||null})});if(!a.ok)return;const l=await a.json();l.session_uuid&&localStorage.setItem("sanco_chat_session",l.session_uuid)}catch(a){console.error("Analytics Error:",a)}}addMessage(t,e){this.messages.push({type:t,text:e});const s=this.shadow.getElementById("chat-content"),o=document.createElement("div");o.className=`message ${t}`,o.textContent=e,s.appendChild(o),s.scrollTop=s.scrollHeight}showTypingIndicator(){this.isTyping=!0;const t=this.shadow.getElementById("chat-content"),e=document.createElement("div");e.id="typing-indicator",e.className="typing-indicator",e.innerHTML=`
      <div class="typing-dot"></div>
      <div class="typing-dot"></div>
      <div class="typing-dot"></div>
    `,t.appendChild(e),t.scrollTop=t.scrollHeight}hideTypingIndicator(){this.isTyping=!1;const t=this.shadow.getElementById("typing-indicator");t&&t.remove()}}document.readyState==="complete"?new h:window.addEventListener("load",()=>new h)})();
